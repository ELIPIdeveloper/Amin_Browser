<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه شناسایی صوتی</title>
    <style>
        /* تنظیمات CSS */
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }

        body {
            background: url('background.jpg') no-repeat center center fixed;
            background-size: cover;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            font-family: 'Vazir', sans-serif; /* برای فونت فارسی */
            color: white;
        }

        #microphone {
            position: absolute;
            bottom: 1%;
            width: 50%;
            cursor: pointer;
        }

        #output-text {
            position: absolute;
            bottom: 10%;
            text-align: center;
            font-size: 1.2em;
            word-wrap: break-word;
            white-space: pre-wrap;
            width: 80%;
        }
    </style>
</head>
<body>

    <!-- عکس مايكروفون -->
    <img id="microphone" src="microphone.png" alt="مايكروفون">

    <!-- محل نمایش متن شناسایی شده -->
    <div id="output-text"></div>

    <script>
        // متغیرها
        const outputText = document.getElementById('output-text');
        const microphone = document.getElementById('microphone');

        // شناسایی صوتی
        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'fa-IR'; // زبان فارسی ایران

        // تابع برای پخش صدا
        function playAudio(audioFile) {
            const audio = new Audio(audioFile);
            audio.play();
        }

        // تابع برای جستجو در گوگل
        function searchGoogle(query) {
            const searchUrl = `https://www.google.com/search?q=${encodeURIComponent(query)}`;
            window.open(searchUrl, '_blank');
        }

        // حالت شروع شناسایی صوتی
        microphone.addEventListener('click', () => {
            outputText.textContent = ''; // پاک کردن متن قبلی
            recognition.start();
        });

        // رویداد شناسایی صوتی
        recognition.onresult = (event) => {
            const transcript = event.results[0][0].transcript.trim(); // متن شناسایی شده
            outputText.textContent = transcript;

            // بررسی وجود کلمات خاص
            if (transcript.includes('سلام')) {
                playAudio('greeting.mp3'); // پخش صدا سلام
            } else if (transcript.includes('چیست') || transcript.includes('کیست')) {
                searchGoogle(transcript); // جستجو در گوگل
            } else {
                playAudio('default.mp3'); // پخش صدا پیشفرض
            }

            recognition.stop(); // متوقف کردن شناسایی صوتی
        };

        // رویداد خطای شناسایی صوتی
        recognition.onerror = (event) => {
            console.error('خطای شناسایی صوتی:', event.error);
        };
    </script>

</body>
</html>
